const _0x13c1df=_0x57cf;(function(_0x48c80b,_0x11bcc3){const _0x12b623=_0x57cf,_0x39534b=_0x48c80b();while(!![]){try{const _0x1e587b=-parseInt(_0x12b623(0x111))/0x1*(-parseInt(_0x12b623(0x136))/0x2)+-parseInt(_0x12b623(0x13b))/0x3+-parseInt(_0x12b623(0x14e))/0x4*(-parseInt(_0x12b623(0xf5))/0x5)+-parseInt(_0x12b623(0x104))/0x6+parseInt(_0x12b623(0x107))/0x7+parseInt(_0x12b623(0x12d))/0x8+parseInt(_0x12b623(0x142))/0x9;if(_0x1e587b===_0x11bcc3)break;else _0x39534b['push'](_0x39534b['shift']());}catch(_0x9dec52){_0x39534b['push'](_0x39534b['shift']());}}}(_0x2074,0xb04a1),process[_0x13c1df(0x126)][_0x13c1df(0x143)]='0');import'./config.js';import{createRequire}from'module';import _0xe61bd4,{join}from'path';import{fileURLToPath,pathToFileURL}from'url';import{platform}from'process';import*as _0x374c1f from'ws';import{readdirSync,statSync,unlinkSync,existsSync,readFileSync,watch,rmSync}from'fs';import _0x574a9e from'yargs';import{spawn}from'child_process';import _0x1aec4e from'lodash';import _0x397bce from'chalk';import _0xf3cac3 from'syntax-error';import{tmpdir}from'os';import{format}from'util';import{makeWASocket,protoType,serialize}from'./lib/simple.js';import{Low,JSONFile}from'lowdb';import _0x3001f3 from'pino';import{mongoDB,mongoDBV2}from'./lib/mongoDB.js';import _0x9266d5 from'./lib/store.js';function _0x2074(){const _0x504a6d=['removeAllListeners','read','1.0.0','info','now','magick','silent','-hide_banner','statusCode','\x20updated\x20plugin\x20-\x20\x27','423988RhOWCF','sort','race','groups.update','group-participants.update','freeze','deleteUpdate','chats','then','loggedOut','participantsUpdate','APIKeys','Guru-bot','sdemote','replace','ffprobe','payload','prefix','localeCompare','ffmpegWebp','__require','mtimeMs','error\x20require\x20plugin\x20\x27','deleted\x20plugin\x20-\x20\x27','keys','forEach','Please\x20install\x20ffmpeg\x20for\x20sending\x20videos\x20(pkg\x20install\x20ffmpeg)','READ','all','module','argv','Goodbye\x20@user','welcome','warn','onDelete','cyan','spromote','autocleartmp','default','-filter_complex','20SBOlqL','connectionUpdate','close','group\x20icon\x20changed','loadDatabase','group\x20link\x20changed\x0a@revoke','opts','bind','entries','handler','toString','@user\x20now\x20admin','output','logger','readyState','5901084JRpVEb','mongodbv2','isInit','588994teIZpA','./plugins/index','convert','Hello,\x20@user\x0awelcome\x20a\x20@group','test','API','-loglevel','map','timestamp','database.json','162649UnHeQH','catch','url','conn','./handler.js','group\x20name\x20changed\x20\x0a@group','credsUpdate','reload','support','error','APIs','plugins','__filename','authFile','groupsUpdate','chain','connection.update','Stickers\x20may\x20not\x20work\x20without\x20imagemagick\x20if\x20libwebp\x20on\x20ffmpeg\x20doesnt\x20isntalled\x20(pkg\x20install\x20imagemagick)','off','‎z/i!#$%+£¢€¥^°=¶∆×÷π√✓©®:;?&.,\x5c-','DATABASE','env','log','creds.update','push','@adiwajshing/baileys','reloadHandler','messages.upsert','1735360QUPfls','webp','syntax\x20error\x20while\x20loading\x20\x27','color','exitProcess','SERVER_PORT','__dirname','message.delete','ffmpeg','6JIsLjj','sRevoke','-frames:v','fromEntries','win32','2786835PAAPxU','data','length','find','./tmp','@user\x20demoted','--version','12793887SMslht','NODE_TLS_REJECT_UNAUTHORIZED'];_0x2074=function(){return _0x504a6d;};return _0x2074();}function _0x57cf(_0x6e835c,_0x40cd50){const _0x2074d9=_0x2074();return _0x57cf=function(_0x57cf1a,_0x537636){_0x57cf1a=_0x57cf1a-0xe8;let _0x27d5b7=_0x2074d9[_0x57cf1a];return _0x27d5b7;},_0x57cf(_0x6e835c,_0x40cd50);}const {DisconnectReason,useMultiFileAuthState}=await import(_0x13c1df(0x12a)),{CONNECTING}=_0x374c1f,{chain}=_0x1aec4e,PORT=process[_0x13c1df(0x126)]['PORT']||process[_0x13c1df(0x126)][_0x13c1df(0x132)]||0xbb8;protoType(),serialize(),global[_0x13c1df(0x11d)]=function filename(_0x216dc8=import.meta[_0x13c1df(0x113)],_0x1bca5a=platform!==_0x13c1df(0x13a)){const _0x3f6fbd=_0x13c1df;return _0x1bca5a?/file:\/\/\//[_0x3f6fbd(0x10b)](_0x216dc8)?fileURLToPath(_0x216dc8):_0x216dc8:pathToFileURL(_0x216dc8)[_0x3f6fbd(0xff)]();},global[_0x13c1df(0x133)]=function dirname(_0x8bc092){const _0xbeafe2=_0x13c1df;return _0xe61bd4['dirname'](global[_0xbeafe2(0x11d)](_0x8bc092,!![]));},global[_0x13c1df(0x162)]=function require(_0x378fce=import.meta[_0x13c1df(0x113)]){return createRequire(_0x378fce);},global[_0x13c1df(0x10c)]=(_0x1e8527,_0x49c3d9='/',_0x61e65e={},_0x191636)=>(_0x1e8527 in global['APIs']?global[_0x13c1df(0x11b)][_0x1e8527]:_0x1e8527)+_0x49c3d9+(_0x61e65e||_0x191636?'?'+new URLSearchParams(Object[_0x13c1df(0xfd)]({..._0x61e65e,..._0x191636?{[_0x191636]:global[_0x13c1df(0x159)][_0x1e8527 in global[_0x13c1df(0x11b)]?global['APIs'][_0x1e8527]:_0x1e8527]}:{}})):''),global[_0x13c1df(0x10f)]={'start':new Date()};const __dirname=global['__dirname'](import.meta[_0x13c1df(0x113)]);global[_0x13c1df(0xfb)]=new Object(_0x574a9e(process[_0x13c1df(0xeb)]['slice'](0x2))[_0x13c1df(0x131)](![])['parse']()),global[_0x13c1df(0x15f)]=new RegExp('^['+(opts[_0x13c1df(0x15f)]||_0x13c1df(0x124))[_0x13c1df(0x15c)](/[|\\{}()[\]^$+*?.\-\^]/g,'\x5c$&')+']'),global['db']=new Low(/https?:\/\//[_0x13c1df(0x10b)](opts['db']||'')?new cloudDBAdapter(opts['db']):/mongodb(\+srv)?:\/\//i[_0x13c1df(0x10b)](opts['db'])?opts[_0x13c1df(0x105)]?new mongoDBV2(opts['db']):new mongoDB(opts['db']):new JSONFile((opts['_'][0x0]?opts['_'][0x0]+'_':'')+_0x13c1df(0x110))),global[_0x13c1df(0x125)]=global['db'],global[_0x13c1df(0xf9)]=async function loadDatabase(){const _0x497f1c=_0x13c1df;if(global['db'][_0x497f1c(0xe8)])return new Promise(_0x2d9040=>setInterval(async function(){const _0x24fc39=_0x497f1c;!global['db'][_0x24fc39(0xe8)]&&(clearInterval(this),_0x2d9040(global['db'][_0x24fc39(0x13c)]==null?global[_0x24fc39(0xf9)]():global['db'][_0x24fc39(0x13c)]));},0x1*0x3e8));if(global['db'][_0x497f1c(0x13c)]!==null)return;global['db']['READ']=!![],await global['db'][_0x497f1c(0x145)]()[_0x497f1c(0x112)](console[_0x497f1c(0x11a)]),global['db'][_0x497f1c(0xe8)]=null,global['db'][_0x497f1c(0x13c)]={'users':{},'chats':{},'stats':{},'msgs':{},'sticker':{},'settings':{},...global['db'][_0x497f1c(0x13c)]||{}},global['db'][_0x497f1c(0x120)]=chain(global['db']['data']);},loadDatabase(),global[_0x13c1df(0x11e)]='GURU-BOT';const {state,saveState,saveCreds}=await useMultiFileAuthState(global[_0x13c1df(0x11e)]),connectionOptions={'printQRInTerminal':!![],'auth':state,'logger':_0x3001f3({'level':_0x13c1df(0x14a)}),'browser':[_0x13c1df(0x15a),'Safari',_0x13c1df(0x146)]};global['conn']=makeWASocket(connectionOptions),conn[_0x13c1df(0x106)]=![];!opts[_0x13c1df(0x10b)]&&setInterval(async()=>{const _0x5cb536=_0x13c1df;if(global['db'][_0x5cb536(0x13c)])await global['db']['write']()['catch'](console[_0x5cb536(0x11a)]);if(opts[_0x5cb536(0xf2)])try{clearTmp();}catch(_0x249816){console[_0x5cb536(0x11a)](_0x249816);}},0x3c*0x3e8);if(opts['server'])(await import('./server.js'))[_0x13c1df(0xf3)](global[_0x13c1df(0x114)],PORT);async function clearTmp(){const _0x2f48c3=_0x13c1df,_0x37b7bb=[tmpdir(),join(__dirname,_0x2f48c3(0x13f))],_0x5428e5=[];return _0x37b7bb[_0x2f48c3(0x167)](_0x1b7d2a=>readdirSync(_0x1b7d2a)[_0x2f48c3(0x167)](_0x4fee34=>_0x5428e5[_0x2f48c3(0x129)](join(_0x1b7d2a,_0x4fee34)))),_0x5428e5[_0x2f48c3(0x10e)](_0x1a4d48=>{const _0xbd4750=_0x2f48c3,_0x1228b1=statSync(_0x1a4d48);if(_0x1228b1['isFile']()&&Date[_0xbd4750(0x148)]()-_0x1228b1[_0xbd4750(0x163)]>=0x3e8*0x3c*0x1)return unlinkSync(_0x1a4d48);return![];});}setInterval(async()=>{const _0x30cb1f=_0x13c1df;var _0x222891=await clearTmp();console[_0x30cb1f(0x127)](_0x397bce[_0x30cb1f(0xf0)]('✅\x20\x20Auto\x20clear\x20\x20|\x20temp\x20folder\x20cleared'));},0xea60);async function connectionUpdate(_0x238a3c){const _0x31af47=_0x13c1df,{connection:_0x5afa0e,lastDisconnect:_0x3c7076,isNewLogin:_0x348c31}=_0x238a3c;if(_0x348c31)conn[_0x31af47(0x106)]=!![];const _0x494f35=_0x3c7076?.[_0x31af47(0x11a)]?.[_0x31af47(0x101)]?.[_0x31af47(0x14c)]||_0x3c7076?.[_0x31af47(0x11a)]?.[_0x31af47(0x101)]?.[_0x31af47(0x15e)]?.['statusCode'];_0x494f35&&_0x494f35!==DisconnectReason[_0x31af47(0x157)]&&conn?.['ws'][_0x31af47(0x103)]!==CONNECTING&&(console['log'](await global[_0x31af47(0x12b)](!![])['catch'](console[_0x31af47(0x11a)])),global['timestamp']['connect']=new Date());if(global['db'][_0x31af47(0x13c)]==null)loadDatabase();}process['on']('uncaughtException',console[_0x13c1df(0x11a)]);let isInit=!![],handler=await import(_0x13c1df(0x115));global[_0x13c1df(0x12b)]=async function(_0x3ed8e7){const _0x1d3cd4=_0x13c1df;try{const _0x15ccd4=await import('./handler.js?update='+Date[_0x1d3cd4(0x148)]())['catch'](console[_0x1d3cd4(0x11a)]);if(Object[_0x1d3cd4(0x166)](_0x15ccd4||{})[_0x1d3cd4(0x13d)])handler=_0x15ccd4;}catch(_0x47afcc){console['error'](_0x47afcc);}if(_0x3ed8e7){const _0x21b354=global['conn'][_0x1d3cd4(0x155)];try{global[_0x1d3cd4(0x114)]['ws'][_0x1d3cd4(0xf7)]();}catch{}conn['ev'][_0x1d3cd4(0x144)](),global[_0x1d3cd4(0x114)]=makeWASocket(connectionOptions,{'chats':_0x21b354}),isInit=!![];}return!isInit&&(conn['ev'][_0x1d3cd4(0x123)](_0x1d3cd4(0x12c),conn[_0x1d3cd4(0xfe)]),conn['ev'][_0x1d3cd4(0x123)](_0x1d3cd4(0x152),conn['participantsUpdate']),conn['ev'][_0x1d3cd4(0x123)]('groups.update',conn['groupsUpdate']),conn['ev'][_0x1d3cd4(0x123)](_0x1d3cd4(0x134),conn['onDelete']),conn['ev'][_0x1d3cd4(0x123)](_0x1d3cd4(0x121),conn[_0x1d3cd4(0xf6)]),conn['ev'][_0x1d3cd4(0x123)](_0x1d3cd4(0x128),conn['credsUpdate'])),conn[_0x1d3cd4(0xed)]=_0x1d3cd4(0x10a),conn['bye']=_0x1d3cd4(0xec),conn[_0x1d3cd4(0xf1)]=_0x1d3cd4(0x100),conn[_0x1d3cd4(0x15b)]=_0x1d3cd4(0x140),conn['sDesc']='dont\x20forget\x20to\x20read\x20\x0a@desc',conn['sSubject']=_0x1d3cd4(0x116),conn['sIcon']=_0x1d3cd4(0xf8),conn[_0x1d3cd4(0x137)]=_0x1d3cd4(0xfa),conn[_0x1d3cd4(0xfe)]=handler[_0x1d3cd4(0xfe)][_0x1d3cd4(0xfc)](global[_0x1d3cd4(0x114)]),conn['participantsUpdate']=handler[_0x1d3cd4(0x158)]['bind'](global[_0x1d3cd4(0x114)]),conn[_0x1d3cd4(0x11f)]=handler[_0x1d3cd4(0x11f)][_0x1d3cd4(0xfc)](global[_0x1d3cd4(0x114)]),conn['onDelete']=handler[_0x1d3cd4(0x154)]['bind'](global[_0x1d3cd4(0x114)]),conn[_0x1d3cd4(0xf6)]=connectionUpdate[_0x1d3cd4(0xfc)](global[_0x1d3cd4(0x114)]),conn[_0x1d3cd4(0x117)]=saveCreds[_0x1d3cd4(0xfc)](global[_0x1d3cd4(0x114)],!![]),conn['ev']['on']('messages.upsert',conn['handler']),conn['ev']['on'](_0x1d3cd4(0x152),conn[_0x1d3cd4(0x158)]),conn['ev']['on'](_0x1d3cd4(0x151),conn[_0x1d3cd4(0x11f)]),conn['ev']['on']('message.delete',conn[_0x1d3cd4(0xef)]),conn['ev']['on'](_0x1d3cd4(0x121),conn[_0x1d3cd4(0xf6)]),conn['ev']['on'](_0x1d3cd4(0x128),conn['credsUpdate']),isInit=![],!![];};const pluginFolder=global[_0x13c1df(0x133)](join(__dirname,_0x13c1df(0x108))),pluginFilter=_0x42201b=>/\.js$/['test'](_0x42201b);global[_0x13c1df(0x11c)]={};async function filesInit(){const _0x1c5d8c=_0x13c1df;for(let _0x2faf13 of readdirSync(pluginFolder)['filter'](pluginFilter)){try{let _0x3c4afb=global['__filename'](join(pluginFolder,_0x2faf13));const _0x53d967=await import(_0x3c4afb);global[_0x1c5d8c(0x11c)][_0x2faf13]=_0x53d967[_0x1c5d8c(0xf3)]||_0x53d967;}catch(_0x12ea69){conn[_0x1c5d8c(0x102)][_0x1c5d8c(0x11a)](_0x12ea69),delete global[_0x1c5d8c(0x11c)][_0x2faf13];}}}filesInit()['then'](_0x700ca1=>console[_0x13c1df(0x127)](Object['keys'](global[_0x13c1df(0x11c)])))['catch'](console[_0x13c1df(0x11a)]),global[_0x13c1df(0x118)]=async(_0x549d8d,_0x15fadc)=>{const _0x543346=_0x13c1df;if(pluginFilter(_0x15fadc)){let _0x22d150=global[_0x543346(0x11d)](join(pluginFolder,_0x15fadc),!![]);if(_0x15fadc in global[_0x543346(0x11c)]){if(existsSync(_0x22d150))conn[_0x543346(0x102)][_0x543346(0x147)](_0x543346(0x14d)+_0x15fadc+'\x27');else return conn[_0x543346(0x102)][_0x543346(0xee)](_0x543346(0x165)+_0x15fadc+'\x27'),delete global[_0x543346(0x11c)][_0x15fadc];}else conn[_0x543346(0x102)]['info']('new\x20plugin\x20-\x20\x27'+_0x15fadc+'\x27');let _0x5018f6=_0xf3cac3(readFileSync(_0x22d150),_0x15fadc,{'sourceType':_0x543346(0xea),'allowAwaitOutsideFunction':!![]});if(_0x5018f6)conn[_0x543346(0x102)][_0x543346(0x11a)](_0x543346(0x12f)+_0x15fadc+'\x27\x0a'+format(_0x5018f6));else try{const _0x2c6a5f=await import(global[_0x543346(0x11d)](_0x22d150)+'?update='+Date[_0x543346(0x148)]());global['plugins'][_0x15fadc]=_0x2c6a5f['default']||_0x2c6a5f;}catch(_0x14955c){conn[_0x543346(0x102)]['error'](_0x543346(0x164)+_0x15fadc+'\x0a'+format(_0x14955c)+'\x27');}finally{global[_0x543346(0x11c)]=Object[_0x543346(0x139)](Object[_0x543346(0xfd)](global[_0x543346(0x11c)])[_0x543346(0x14f)](([_0x456cb4],[_0x123b70])=>_0x456cb4[_0x543346(0x160)](_0x123b70)));}}},Object[_0x13c1df(0x153)](global['reload']),watch(pluginFolder,global[_0x13c1df(0x118)]),await global[_0x13c1df(0x12b)]();async function _quickTest(){const _0x4220e5=_0x13c1df;let _0x2a3c41=await Promise[_0x4220e5(0xe9)]([spawn('ffmpeg'),spawn(_0x4220e5(0x15d)),spawn('ffmpeg',[_0x4220e5(0x14b),_0x4220e5(0x10d),_0x4220e5(0x11a),_0x4220e5(0xf4),_0x4220e5(0x130),_0x4220e5(0x138),'1','-f',_0x4220e5(0x12e),'-']),spawn(_0x4220e5(0x109)),spawn('magick'),spawn('gm'),spawn(_0x4220e5(0x13e),[_0x4220e5(0x141)])][_0x4220e5(0x10e)](_0x307fda=>{const _0x5f365a=_0x4220e5;return Promise[_0x5f365a(0x150)]([new Promise(_0x210ca8=>{const _0x143d46=_0x5f365a;_0x307fda['on'](_0x143d46(0xf7),_0x322b0d=>{_0x210ca8(_0x322b0d!==0x7f);});}),new Promise(_0x3a62cb=>{const _0x511c1d=_0x5f365a;_0x307fda['on'](_0x511c1d(0x11a),_0x3bddc9=>_0x3a62cb(![]));})]);})),[_0x201c4d,_0x38af26,_0x3027f1,_0x253ed3,_0x319fb6,_0x27f9f2,_0xb50af3]=_0x2a3c41;console[_0x4220e5(0x127)](_0x2a3c41);let _0x25fc48=global[_0x4220e5(0x119)]={'ffmpeg':_0x201c4d,'ffprobe':_0x38af26,'ffmpegWebp':_0x3027f1,'convert':_0x253ed3,'magick':_0x319fb6,'gm':_0x27f9f2,'find':_0xb50af3};Object['freeze'](global[_0x4220e5(0x119)]);if(!_0x25fc48[_0x4220e5(0x135)])conn['logger'][_0x4220e5(0xee)](_0x4220e5(0x168));if(_0x25fc48[_0x4220e5(0x135)]&&!_0x25fc48[_0x4220e5(0x161)])conn[_0x4220e5(0x102)][_0x4220e5(0xee)]('Stickers\x20may\x20not\x20animated\x20without\x20libwebp\x20on\x20ffmpeg\x20(--enable-ibwebp\x20while\x20compiling\x20ffmpeg)');if(!_0x25fc48[_0x4220e5(0x109)]&&!_0x25fc48[_0x4220e5(0x149)]&&!_0x25fc48['gm'])conn[_0x4220e5(0x102)][_0x4220e5(0xee)](_0x4220e5(0x122));}_quickTest()[_0x13c1df(0x156)](()=>conn[_0x13c1df(0x102)][_0x13c1df(0x147)]('Quick\x20Test\x20Done'))[_0x13c1df(0x112)](console[_0x13c1df(0x11a)]);
